# 🚀 Telegram - Быстрый старт

## Что нужно сделать ПРЯМО СЕЙЧАС:

### ✅ Шаг 1: SQL (2 минуты)

1. Откройте **Supabase** → **SQL Editor**
2. Откройте файл `SQL_UPDATE_TELEGRAM_TOKENS.sql`
3. **Скопируйте весь код**
4. Вставьте в SQL Editor
5. Нажмите **"RUN"** ▶️

---

### ✅ Шаг 2: Обновить бота (3 минуты)

1. Откройте **Supabase Dashboard** → **Edge Functions**
2. Найдите функцию **`telegram-webhook`**
3. Нажмите **три точки** → **"Edit"** (или иконку редактирования)
4. Откройте файл `supabase\functions\telegram-webhook\index.ts`
5. **Скопируйте весь код** из файла
6. **Замените** код в редакторе Supabase
7. Нажмите **"Deploy"** 🚀

---

### ✅ Шаг 3: Тест!

#### Способ 1 (из приложения):
- Приложение → кнопка "Подключить Telegram" → Ссылка → Бот

#### Способ 2 (из Telegram — НОВЫЙ!):
- Telegram → `/start` → Код → Приложение → Ввод кода

---

## 🎯 Оба способа теперь работают!

**Выбирайте любой:**
- 🔵 Есть доступ к приложению? → Способ 1
- 🟢 Начинаете с Telegram? → Способ 2

---

## 📱 Как выглядит новый способ:

### В Telegram:
```
👋 Привет! Это бот системы Энергомониторинг.

🔑 Ваш код для привязки:

123456

Как привязать аккаунт:
1. Откройте веб-приложение Энергомониторинг
2. Войдите с вашим email и паролем
3. Введите этот код на экране привязки

⏰ Код действителен 1 час
```

### В приложении (после входа):
```
┌─────────────────────────────┐
│  Привязка Telegram          │
│  Введите код из Telegram бота│
│  [Необязательно]            │
├─────────────────────────────┤
│  📱 Как получить код?       │
│  1. Откройте Telegram       │
│  2. @money_cheking_bot      │
│  3. /start                  │
│  4. Скопируйте код          │
├─────────────────────────────┤
│  Код из Telegram (6 цифр)   │
│  ┌───────────────────────┐  │
│  │    [1][2][3][4][5][6] │  │
│  └───────────────────────┘  │
│  [Привязать]  [Пропустить]  │
└─────────────────────────────┘
```

---

## ❓ FAQ

**Q: Что если я уже привязал Telegram старым способом?**
A: Всё работает! Новый способ не конфликтует со старым.

**Q: Можно ли использовать только новый способ?**
A: Да, можно. Оба способа независимы.

**Q: Что если код истёк?**
A: Напишите `/start` в боте снова — получите новый код.

**Q: Обязательно ли привязывать Telegram?**
A: Нет, можно нажать "Пропустить". Но без привязки не будет уведомлений.

---

**Готово!** 🎉

Оба способа привязки теперь работают параллельно и не мешают друг другу.
